{"version":3,"sources":["src/utils.ts","src/store/store.ts","src/store/actions.ts","src/store/reducers.ts","src/store/index.ts","src/app.ts"],"names":[],"mappings":";;;;;AEAa,AFAb,IAAM,GEAO,CAAA,AFAH,GAAG,KEAA,GAAW,AFAH,CAAC,aAAT,CAAuB,EEAvB,IFAA,CAAb;AECa,AFAb,IAAM,GEAO,CAAA,IFAC,GAAG,IEAJ,GAAc,CFAF,CAAC,aAAT,CAAuB,IEA3B,IFAI,CAAjB;AECa,OAAA,CAAA,WAAA,GAAc,oBAAd;AFCb,SAAgB,WAAhB,CAA4B,UAA5B,EAAsC;AECtC,AFAE,IEAF,EFAK,KEAL,KFAe,KAAK,SAAlB,EAA4B;AEA9B,AFCI,IAAA,IAAI,CAAC,SAAL,GAAiB,UAAU,CAAC,MAA5B;AEDJ,AFEI,IAAA,QEFJ,AFEY,CAAC,SAAT,GAAqB,EAArB;AEAA,AENJ,QAAA,CAAA,EFMI,KENJ,CAAA,CFMI,CAAoB,OAApB,AENJ,CAAA,CFMmC,AENnC;AFMwB,AFCpB,SEDoB,AFCD,IAAA,EAAA,CEDC,EFCD,CEDC,AFCD,EAAA,KEDC,OFCD,GAAA,UAAnB,EAAmB,EAAA,GAAA,YAAA,CAAA,MAAnB,EAAmB,EAAA,EAAnB,EAA+B;AEFtB,AEJb,AJMS,QINT,CFIa,AEJb,CJMe,GEFF,CFEM,EEFC,AEJpB,CAAA,AJMmB,MEFC,CAAA,KEJpB,AJMmB,CINnB,AJMmB,CINnB,CFIa,AFEM,CAAV;AED6B,AFEhC,MAAA,QAAQ,CAAC,SAAT,IAAsB,6DAEY,IAAI,CAAC,SAAL,CAAe,IAAf,CAFZ,GAEgC,iBAFhC,GAGhB,IAAI,CAAC,KAHW,GAGN,iDAHM,GAIiB,IAAI,CAAC,SAAL,CAAe,IAAf,CAJjB,GAIqC,qEAJ3D;AKRN,ADEA,AJeK,IKjBL,IDEA,CAAA,ECFA,GAAA,EDEA,CAAA,ICFA,CAAA,MDEA,CAAA,CAAA,CCFA,CAAA;AHQA,AFUG,SEVH,OAAA;AGPA,AHGA,AFeC,CEfD,EAAA,CGHA,SAAA,GAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;;AAEA,AHCa,ADHb,ADEA,IKAM,AJFN,GCGa,AFDb,CECa,AFDb,CKAW,AJFX,GIEc,GHCD,GAAA,CFDb,CKAsB,CAAC,CLAvB,GECa,QFDb,CKAc,CAAuB,OAAvB,CAAd;AACA,AJHA,IIGM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,AHKA,ADTA,IIIM,AHKN,OGLa,CJJb,EIIgB,AHKhB,QGLwB,CAAC,aAAT,CAAuB,cAAvB,CAAhB;AACA,AHIA,ADHI,IIDE,OJCF,CIDU,GAAG,CJCb,CAAY,MIDS,CAAC,CJCtB,EAA0B,UIDb,CAAuB,CJCpC,EAA2C,KID9B,CAAjB;AAEA,AHEA,ADHgB,IICV,IJDU,IICF,AHEd,GGFiB,CJDD,KAAA,KAAA,CAAA,EAAA;AIEd,AHGE,ADLY,EIEd,IJFc,CIET,EAAE,EHGL,GDLY,GAAA,CIEE,CAAC,AJFH,ECKZ,CAAoB,OAApB,EAA+B;AGJlB,AHIO,ADLK,CIC7B,QHIwB,OAAA,GAAA,OAAA;AGAxB,AHDa,IGCP,KAAK,AHDE,GGCC,CHDD,GGCK,AHDE,OAAA,CAAA,CGCO,CAAC,KAAd,CAAoB,GHDrB,KGCC,CAAd;AAEA,AHFsC,ADLR,MIOxB,CAAC,CJPuB,YAAA,GIO9B,CACE,CJR4B,KAAA,CIO9B,AJP8B,EIS5B,AJT4B,YIS5B;AACE,AJV0B,MIUtB,AJVsB,CIUrB,KAAK,CAAC,KAAN,AJVqB,CIUT,EJVS,EIUrB,AJVqB,EIU1B,EAAyB;AAEzB,AHNJ,ADN+C,MIYrC,GHNV,CGMc,GAAG,MHNjB;AGMkB,AHTlB,CAAA,EAAA,CGSkB,KAAK,EAAC,KAAK,CAAC,KAAb;AAAmB,AJX5B,IIW4B,KJXvB,GIW+B,EAAC,MJXrC,GAAmB,EAAnB;AIWS,AHTJ,ADDL,GIUJ,IHTS,CAAA,CDDA,QAAL,CCCK,EDDW,CCCX,ODDL,GCCK;AGWT,AJXI,EIWJ,KAAK,CAAC,CJXG,KAAL,EIWJ,CAAe,AJXE,IIWE,CJXG,MAAL,CAAY,CIWD,CAAC,OAAd,CAAsB,EJXpB,EIWF,AJX2B,CIW1C,CJXiB,CAAb;AIaJ,AHRJ,ADJK,EIYD,EHRJ,GGQS,CAAC,KAAN,CHRJ,EGQkB,EAAd;AACD,AHTH,CGDA,EAWE,KAXF;AAcA,AHbA,ADFI,EAAA,EIeE,IJfF,CAAA,GCEJ,GGaiB,GAAG,KAAK,AJfrB,CIesB,AJflB,KAAA,CAAA,GIeY,CAAgB,KJfhC,EAAI,GIe4B,IJfhC,CIegC,CJfvB,CIe4B;AACvC,AHZE,EGYF,OAAA,AJhBE,CIgBF,CHZE,UGYF,AHZE,CGYU,AHZU,EDJpB,GIgBe,CAAC,CHZhB,EAA+B,EGYrB,CAAY,IAAxB;AACD,AHbuB,ADHhB,CIcY,CAApB,OHXwB,IDHT,GCGS,EDHJ,CCGI,IDHhB,GCGgB;AGexB,AHhBa,ADDR,KAFQ,EImBN,CAAC,CHhBK,IAAA,GAAO,OAAA,CGgBpB,AHhBoB,CGgBK,OAAzB,EAAiC,CHhBpB,UGgBb,EAA6C,KAA7C;AAEA,AHjBsC,QGiB9B,CAAC,WJrBI,KIqBb,CAA0B,OAA1B,EAAmC,UAAS,KAAT,EAAc;AAC/C,MAAI,MAAM,GAAG,IAAb;AHjBF,ADLa,GAAT,MCKJ,UAAA;AGkBE,AHrBF,CAAA,EAAA,GGqBK,KAAK,CAAC,MAAN,CAAa,YAAb,CAA0B,MAA1B,MAAsC,QAAzC,EAAkD;AAChD,AJpBA,EAAA,EIoBA,GJpBA,CAAA,EIoBM,GAAG,IJpBT,CIoBc,AJpBd,CIoBe,MAAf,EJpBA,GAAA,UAAU,EAAV,EAAY;AIqBZ,AHvBS,ACfb,AFiBI,IEjBJ,GDea,CGuBH,AHvBG,ADET,IIqBU,CJrBV,EIqBa,AFtCjB,CFiBI,ECFS,ACfb,CEsCqB,CAAC,AJrBlB,CCFS,IGuBI,CAAW,IFtC5B,CDea,ACfb,CEsCkC,CAAC,KFtCnC,CAAA,MEsC4B,CAAoB,IFtChD,CAAA,CAAA,KEsC4B,CAAX,CAAb;AACA,IAAA,KAAK,CAAC,QAAN,CAAe,IAAI,SAAS,CAAC,UAAd,CAAyB,IAAzB,CAAf;AACD,AFtCU,AFgBL,GIkBN,IFlCW,CAAA,CEsCL,AJtBK,IIsBF,KAAK,CAAC,CFtCJ,AFgBL,GEhBoB,AFgBJ,EIsBb,CAAa,WJtBA,CIsBb,AJtBoB,CIsBM,IJtBD,EIsBzB,MAAsC,GJtBzB,EAAuB,CAAC,EAAD,CAAvB,CIsBhB,AJtBA,EIsBoD;AACxD,AFtCA,AFgBI,EEhBJ,EEsCA,IFtCM,CFgBG,CIsBH,AFtCC,GEsCE,EFvCe,AFiBpB,GIsBU,CAAC,MAAf;AACA,AFtCA,AFgBI,EEhBJ,MEsCI,CFtCG,EEsCF,AFtCG,AFgBG,GIsBH,EFxCgB,MEwCR,CAAC,AJtBN,aIsBH,CAAuB,OAAvB,CAAR;AACA,AFtCA,AFgBQ,EEhBR,IAAI,AFgBI,EIsBJ,AFtCE,CAAC,EFgBK,CAAC,IIsBD,GAAG,IJtBP,GAAmB,CIsBJ,CAAC,GJtBO,CAAC,SIsBjB,CAAuB,CJtBX,CAAiB,MIsB7B,AJtBY,CIsB3B,AJtBmD,UAAA,GAAA,EAAG;AIuBtD,AFvCQ,AFgBiD,IIuBzD,AFvCQ,KAAK,EAAC,CEuCN,CAAC,EJvBgD,GAAG,IIuB5D,CJvBgE,EIuB3C,AJvBoC,CEhBlD,YEuCP;AACA,AFxC8B,AFgBoC,IEhBpC,GFgBH,CIwBvB,AJxBI,IEhB8B,EAAC,EEwC7B,GAAG,IAAI,CAAC,KAAL,CAAW,MAAM,CAAC,KAAlB,CAAb;AACA,AFzCO,AFiBF,GEjBC,CEyCN,CJ1BI,EI0BH,CAAC,YAAF,CAAe,MAAf,EAAuB,MAAvB;AACA,AF7CwB,AFqBvB,CErBQ,EFeT,CI8BA,GAAC,CAAC,YAAF,CAAe,OAAf,EAAuB,QAAM,CAAC,KAA9B;AACA,IAAA,QAAQ,CAAC,WAAT,CAAqB,GAArB;AACA,AFzCJ,AFiBI,EAAA,EIwBA,GJxBA,CAAA,CEjBY,GEyCJ,CAAC,GFzCb,CACI,AFgBA,CAAA,IEjBJ,EAEI,EFeA,GIwBA,AJxBA,CIwB0B,AFzC9B,EAEqC,KEuCjC,EAAkC,AJxBzB,MAAT,EAAe,EIwB4B,CAAT,EAAU;AAC1C,AFzCF,AFiBI,MIwBF,AFzCF,GFiBS,EEjBT,GEyCQ,AJxBJ,CIwBK,CFzCT,CFiBiB,GIwBf,CFzCF,CAAA,AFiBsB,CIwBL,CFzCjB,EEyCkB,CAAC,CJxBF,CAAY,GIwB3B,EJxBgC,KAAjB,EAAuB,MAAvB,CAAb;AIyBF,AF1CF,AFkBI,IElBJ,EE0CE,GF1CF,AFkBS,GElBD,CE0CC,CAAC,CJxBN,EIwBF,CAAY,CF1CN,CAAA,ME0CN,EAAqB,GAAC,CAAC,AF1CzB,KE0CE;AACE,AF3CgB,AFmBnB,GAHD,GI2BI,KAAK,CAAC,QAAN,CAAe,IAAI,SAAS,CAAC,UAAd,CAAyB,QAAzB,CAAf;AACH,KAJD;AAKA,AF1CA,AFkBQ,EAAA,EIwBR,GJxBQ,CAAA,EElBD,EE0CC,CAAC,GF1CI,CAAC,AFkBN,CAAA,GElBR,GE0CA,AJxBQ,CIwBa,EJxBrB,MIwBA,MJxBA;AIyBD,AF1CK,AFiBJ,QAAA,CEjBS,IFiBT,GAAA,IEjBoB,AFiBpB,CEjBqB,QAAjB;AE4CP,AF5CmC,CEqBpC;AA0BA,AF9CY,AFiBJ,KI6BH,CAAC,GJ7BO,GEjBK,GE8ClB,CAAgB,AF9CM,GAAG,CFiBjB,CAAiB,IEjBM,CE8Cf,AF9CgB,EFiBxB,CAAyB,EI6BjB,EAAK,AF9CT,MFiBqB,EAAA,EAAE;AI6BX,AJ7Bc,SI6Bd,IJ7Bc,EAAE,CI6BT,AJ7BU,CI6BT,GAAR,CAAY,AJ7BS,CAAC,KAAN,CAAF,GI6Bd,EAAuB,KAAvB,CAAA;AAA6B,AF7CzC,AFgBwC,CI6BpD,IJ7BQ,OEhBU,IAAI,GAAA,cAAA,CAAO,KAAK,CAAC,OAAD,CAAL,CAAe,IAAtB,EAA0B,CAAC,IAAD,CAA1B,CAAV;AFiBP,GAFO;AEdA,eAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACO,KADP,CAAA,EACY;AACR,AFiBJ,EAAA,KAAA,CAAA,EEjBI,IAAI,EAAA,CFiBR,CAAA,MAAA,GAAR,UAAe,KAAf,EAAqB,MAArB,EAA2B;AElBP,AFmBhB,QAAM,CEpBF,CAAA,MFoBU,GAAG,EAAjB;AEhBC;AFiBD,SAAI,IAAM,IAAV,IAAkB,KAAK,QAAvB,EAAgC;AEfhC,AFgBI,MAAA,GEhBC,KFgBO,CAAC,IAAD,CEhBI,AFgBZ,CEhBa,EFgBI,KAAK,IEhB1B,IFgBqB,CAAc,IAAd,EAAoB,KAApB,EAA0B,MAA1B,CAAjB;AEhB2B,AFiB9B;AEhBG,YAAM,IAAI,GAAG,KAAK,CAAC,OAAD,CAAL,CAAe,IAAf,CAAoB,MAApB,CACT,UAAA,IAAA,EAAI;AAAG,AFgBf,WAAO,MEhBQ,EFgBf,EEhBmB,CAAC,KAAL,KAAe,MAAM,CAAC,OAAP,CAAe,KAA9B;AAAmC,AFiBrD,GANO,MEZa,CAAb;AAGA,eAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACO,KADP,CAAA,EACY;AACR,AFehB,SAAA,CEfgB,IAAI,AFepB,EEfoB;AADI,AF1BxB,CAAA,EAAA,MEyBY,CAAA;AAIH;AF7BI,OAAA,CAAA,KAAA,GAAA,KAAA;AE+BL,SAAK,WAAW,CAAC,WAAjB;AAA+B;AAC3B,YAAI,UAAU,GAAG,KAAK,CAAC,OAAD,CAAL,CAAe,IAAf,CAAoB,SAApB,CAA8B,UAAA,IAAA,EAAI;AAAI,iBAAA,IAAI,CAAC,KAAL,KAAc,IAAI,CAAC,KAAnB;AAAwB,SAA9D,CAAjB;AACA,YAAM,IAAI,GAAG,MAAM,CAAC,OAApB;AACA,QAAA,KAAK,CAAC,OAAD,CAAL,CAAe,IAAf,CAAoB,UAApB,IAAkC,IAAlC;AACA,eAAA,QAAA,CAAA,EAAA,EAAW,KAAK,CAAC,OAAD,CAAhB,CAAA;AAEH;AA1BL;;AA6BA,SAAO,MAAM,CAAC,IAAP,CAAY,KAAZ,EAAmB,MAAnB,KAA8B,CAA9B,GAAkC,KAAK,GAAG,OAAA,CAAA,YAA1C,GAAyD,KAAhE;AACH;;AAlCD,OAAA,CAAA,OAAA,GAAA,OAAA","file":"app.5cec07dd.js","sourceRoot":"..","sourcesContent":["const span = document.querySelector('span') as HTMLSpanElement;\r\nconst todoList = document.querySelector('.todos') as HTMLLIElement;\r\n\r\nexport function renderTodos(collection) {\r\n  if(collection !== undefined){\r\n    span.innerHTML = collection.length;\r\n    todoList.innerHTML = '';\r\n    for (const item of collection) {\r\n      todoList.innerHTML += `\r\n        <li>\r\n        <input type=\"checkbox\" value='${JSON.stringify(item)}'/>\r\n          ${item.label}\r\n          <button type=\"button\" data-todo='${JSON.stringify(item)}'>\r\n            Delete\r\n          </button>\r\n        </li>\r\n       `;\r\n    }\r\n  }\r\n}","\r\nexport class Store {\r\n\r\n    private subscribers:Function[];\r\n    private reducers:{[key:string]:Function};\r\n    private state:{[key:string]:any};\r\n\r\n    constructor(reducers = {},initialState = {}){\r\n        this.subscribers = [];\r\n        this.reducers = reducers;\r\n        this.state = this.reduce(initialState,{});\r\n    }\r\n\r\n    get value(){\r\n        return this.state;\r\n    }\r\n\r\n    subscribe(fn){\r\n        this.subscribers = [...this.subscribers,fn];\r\n        this.notify();\r\n        return () => {\r\n            this.subscribers = this.subscribers.filter(sub=> sub!== fn);\r\n        };\r\n    }\r\n\r\n    dispatch(action) {\r\n        this.state = this.reduce(this.state,action);\r\n        this.notify();\r\n    }\r\n\r\n    private notify(){\r\n        this.subscribers.forEach(fn=> fn(this.value));\r\n    }\r\n\r\n\r\n    private reduce(state,action){\r\n        const newState = {};\r\n        for(const prop in this.reducers){\r\n            newState[prop] = this.reducers[prop](state,action);\r\n        }\r\n        return newState;\r\n    }\r\n\r\n}","export const ADD_TODO = '[Todo] Add Todo';\r\nexport const REMOVE_TODO = '[Todo] Remove Todo';\r\nexport const MODIFY_TODO = '[Todo] Modify Todo';\r\n\r\nexport class AddTodo {\r\n    readonly type = ADD_TODO;\r\n    constructor(private payload:any){}\r\n\r\n}\r\n\r\nexport class RemoveTodo{\r\n    readonly type = REMOVE_TODO;\r\n    constructor(private payload:any){}\r\n}\r\n\r\nexport class ModifyTodo{\r\n    readonly type = MODIFY_TODO;\r\n    constructor(private payload:any){}\r\n}","import * as fromActions from './actions';\r\n\r\nexport const initialState = {\r\n    loaded:false,\r\n    loading:false,\r\n    data: [{label:'Todo di Prova',complete:false}],\r\n};\r\n\r\nexport function reducer(\r\n    state = initialState,\r\n    action: {type:string;payload:any}\r\n){\r\n    switch(action.type){\r\n        case fromActions.ADD_TODO : {\r\n            const todo = action.payload;\r\n            const data = [...state['todos'].data,todo];\r\n            return {\r\n                ...state,\r\n                data,\r\n            };\r\n        }\r\n\r\n        case fromActions.REMOVE_TODO : {\r\n            const data = state['todos'].data.filter(\r\n                todo=> todo.label !== action.payload.label\r\n            );\r\n            return {\r\n                ...state,\r\n                data,\r\n            };\r\n        }\r\n\r\n        case fromActions.MODIFY_TODO : {\r\n            let foundIndex = state['todos'].data.findIndex(todo => todo.label ===todo.label);\r\n            const data = action.payload;\r\n            state['todos'].data[foundIndex] = data;\r\n            return {...state['todos'] };\r\n            \r\n        }\r\n    }\r\n\r\n    return Object.keys(state).length === 0 ? state = initialState : state;\r\n}","export * from './store';\r\nexport * from './reducers';\r\nexport * from './actions';","import { renderTodos } from './utils';\r\nimport * as fromStore from './store';\r\n\r\nconst input = document.querySelector('input') as HTMLInputElement;\r\nconst button = document.querySelector('button') as HTMLButtonElement;\r\nconst destroy = document.querySelector('.unsubscribe') as HTMLButtonElement;\r\nconst todoList = document.querySelector('.todos') as HTMLLIElement;\r\n\r\nconst reducers = {\r\n  todos: fromStore.reducer,\r\n};\r\n\r\nconst store = new fromStore.Store(reducers);\r\n\r\nbutton.addEventListener(\r\n  'click',\r\n  () => {\r\n    if (!input.value.trim()) return;\r\n\r\n    const todo = {label:input.value,complete:false};\r\n\r\n    store.dispatch(new fromStore.AddTodo(todo));\r\n\r\n    input.value = '';\r\n  },\r\n  false\r\n);\r\n\r\nconst unsubscribe = store.subscribe(state=> {\r\n  renderTodos(state.todos.data);\r\n});\r\n\r\ndestroy.addEventListener('click',unsubscribe,false);\r\n\r\ntodoList.addEventListener('click', function(event) {\r\n  let target = null;\r\n  if(event.target.getAttribute('type') === 'button'){\r\n    target = event.target as HTMLButtonElement;\r\n    const todo = JSON.parse(target.getAttribute('data-todo') as any);\r\n    store.dispatch(new fromStore.RemoveTodo(todo));\r\n  }else if(event.target.getAttribute('type') === 'checkbox'){\r\n    target = event.target as HTMLInputElement;\r\n    let x = document.createElement(\"INPUT\");  \r\n    let inviaMod = document.createElement(\"BUTTON\");\r\n    inviaMod.innerHTML = 'Modify Todo';\r\n    let valore = JSON.parse(target.value);\r\n    x.setAttribute(\"type\", \"text\");\r\n    x.setAttribute(\"value\",valore.label);\r\n    todoList.appendChild(x);\r\n    inviaMod.addEventListener('click',function(e){\r\n      valore.label = x.value;\r\n      console.log('valore',x.value);\r\n        store.dispatch(new fromStore.ModifyTodo(valore));\r\n    });\r\n    todoList.appendChild(inviaMod);\r\n  }\r\n \r\n});\r\n\r\n\r\nstore.subscribe(state=> console.log('STATE:::',state));"]}